# EmojiHub

一个跨平台的表情包管理工具，帮助你更好地整理和使用表情包。通过悬浮工具条实现快速调用表情的功能。

## 功能特性

### 已完成功能 ✅

1. 基础框架
   - 跨平台支持 (iOS/Android/Windows/Linux)
   - SQLite 数据库存储
   - 深色主题
   - 错误处理机制

2. 分类管理
   - 分类列表显示
   - 分类切换功能
   - 分类图标显示
   - 新建分类
   - 编辑分类
   - 删除分类
   - 分类排序
   - 分类颜色自定义

3. 表情导入
   - 批量选择图片
   - 图片预览功能
   - 导入进度显示
   - 图片本地存储
   - 相对路径管理

4. 图片管理 
   - 表情预览功能
   - 表情编辑功能
   - 表情删除功能
   - 长按菜单功能
   - 批量操作功能
   - 跨分类移动
   - 表情分享功能

### 开发中功能 🚧

1. 图片管理
   - 拖拽排序功能
   - 表情搜索功能
   - 表情标签功能
   - 表情收藏功能
   - 使用历史记录

2. 跨平台快速访问 
   - [ ] Android 快捷使用方案
     - [ ] 悬浮窗方案（当前主要方案）
       - [✅] 基础功能
         - [✅] 系统级悬浮窗显示/隐藏
         - [✅] 前台服务通知
         - [✅] 系统权限管理
       - [✅] 核心功能
         - [✅] 表情快速分享
         - [✅] 支持所有应用
     
     - [ ] 输入法扩展方案（待评估）
       - [ ] 自定义输入法开发
       - [ ] 表情直接输入功能
       - [ ] 快速切换机制
       - [ ] 优点：直接输入，无需分享
       - [ ] 缺点：需要切换输入法
     
     - [ ] 无障碍服务方案（待评估）
       - [ ] 模拟输入操作
       - [ ] 跨应用粘贴
       - [ ] 优点：操作便捷
       - [ ] 缺点：需要无障碍权限
     
     - [ ] 快捷方式方案（补充功能）
       - [ ] 桌面快捷方式
       - [ ] 通知栏快速操作
       - [ ] 常用表情固定
       - [ ] 优点：快速访问
       - [ ] 缺点：表情数量受限

     - [🚧] 性能优化
       - [🚧] 图片加载优化
       - [🚧] 内存占用优化
       - [🚧] 启动速度优化

   - [ ] iOS 快捷使用方案
     - [ ] 键盘扩展（主要方案）
       - [ ] 系统键盘扩展开发
         - [ ] 表情选择面板
         - [ ] Globe键切换支持
         - [ ] 图片插入功能
       - [ ] App Groups数据共享
         - [ ] 表情数同步
         - [ ] 使用记录同步
       - [ ] 优点
         - [ ] 无需切换键盘
         - [ ] 原生体验
         - [ ] 开发成本低
     - [ ] 自定义键盘（备选方案）
       - [ ] 完整键盘开发
         - [ ] 字母数字输入
         - [ ] 表情选择功能
         - [ ] 输入法切换
       - [ ] 缺点
         - [ ] 开发工作量大
         - [ ] 用户使用门槛高
     - [ ] 分享扩展（补充方案）
       - [ ] 系统分享面板集成
       - [ ] 快速分享功能

   - [ ] Windows/Linux 方案
     - [ ] 全局快捷键
       - [ ] 快速唤起选择界面
       - [ ] 快捷键自定义
     - [ ] 系统托盘
       - [ ] 最近使用表情
       - [ ] 快速访问入口
     - [ ] 跨应用粘贴
       - [ ] 模拟键盘粘贴
       - [ ] 拖拽支持

#### 实现说明
1. **跨平台快捷使用策略**
   - Android 平台：
     - 主要方式：系统分享功能
     - 优势：兼容性最好，支持所有应用
     - 交互：点击表情直接分享，减少操作步骤
   
   - iOS 平台：
     - 主要方案：系统键盘扩展
       - 为系统键盘添加表情面板
       - 通过 Globe 键快速切换
       - 支持直接插入图片
     - 备选方案：自定义键盘
       - ���整的键盘功能
       - 内置表情选择
     - 补充方案：分享扩展
       - 类似 Android 的分享功能
   
   - 桌面平台：
     - 主要方式：全局快捷键 + 系统托盘
     - 优势：快速访问，键盘友好

2. **性能优化重点**
   - 启动速度优化
   - 内存占用控制
   - 图片加载优化
   - 滚动性能优化

3. **用户体验优化**
   - 减少操作步骤
   - 智能默认选项
   - 保持界面简洁
   - 性能体验优先

### 其他功能
   - 应用图标设计
   - 启动页面
   - 设置页面
   - 数据备份/恢复
   - 数据同步
   - 本地缓存优化

## 技术栈

- Flutter
- Riverpod (状态管理)
- SQLite (数据存储)
- Path Provider (文件管理)
- Image Picker (图片选择)

## 项目结构

```
lib/
├── core/           # 核心功能
│   ├── constants/  # 常量定义
│   ├── theme/      # 主题配置
│   └── utils/      # 工具类
├── data/           # 数据层
│   ├── models/     # 数据模型
│   ├── repositories/# 数据库
│   └── services/   # 服务类
├── providers/      # 状态管理
├── ui/             # 界面层
│   ├── screens/    # 页面
│   └── widgets/    # 组件
└── main.dart       # 入口文件
```

## 开发计划

### 第一阶段（已完成）✅
- [x] 基础框架搭建
- [x] 分类列表实现
- [x] 表情导入功能
- [x] 分类管理功能
  - [x] 新建分类
  - [x] 编辑分类
  - [x] 删除分类
  - [x] 分类排序
  - [x] 分类颜色自定义
- [x] 表情管理功能
  - [x] 表情预览
  - [x] 表情编辑
  - [x] 表情删除
  - [x] 批量操作
  - [x] 跨分类移动
  - [x] 表情分享

### 第二阶段（进行中）🚧

1. Android 悬浮窗完善
   - [🚧] 第一阶段：最近使用表情（高优先级）
     - [ ] 数据层准备
       - [ ] 创建最近使用表情数据表
       - [ ] 实现基础CRUD操作
       - [ ] 简单的使用频率统计
     - [ ] UI实现
       - [ ] 悬浮窗中的最近使用区域
       - [ ] 简单的表情预览
       - [ ] 基础分享功能
     - [ ] 基础优化
       - [ ] 限制显示10个最近表情
       - [ ] 简单的使用频率排序

   - [🚧] 第二阶段：分类切换功能（中优先级）
     - [ ] 基础分类列表
       - [ ] 简单分类列表显示
       - [ ] 基础分类切换功能
     - [ ] 交互优化
       - [ ] 左右滑动切换分类
       - [ ] 简单的分类快速跳转

   - [🚧] 第三阶段：性能优化（中优先级）
     - [ ] 内存优化
       - [ ] 基础图片懒加载
       - [ ] 简单的内存缓存
     - [ ] 启动速度优化
       - [ ] 基础冷启动优化
       - [ ] 简单的预加载机制

   - [🚧] 第四阶段：用户体验提升（低优先级）
     - [ ] 交互优化
       - [ ] 简单的操作反馈
       - [ ] 基础手势优化
     - [ ] 界面优化
       - [ ] 优化悬浮窗位置记忆
       - [ ] 快速隐藏/显示功能

2. iOS 快捷使用
   - [ ] 键盘扩展
     - [ ] 基础功能
       - [ ] 创建键盘扩展
       - [ ] 实现表情选择面板
       - [ ] 配置 App Groups
     - [ ] 核心功能
       - [ ] 表情选择和预览
       - [ ] 简单分类切换
       - [ ] 图片插入功能

### 开发要点

1. **保持简单**
   - 只开发必要功能
   - 避免过度设计
   - 快速交付使用

2. **重视体验**
   - 确保基本流畅
   - 简化使用步骤
   - 保持界面整洁

3. **快速迭代**
   - 及时收集反馈
   - 快速修复问题
   - 逐步完善功能

## 安装和使用

1. 确保已安装 Flutter 开发环境
2. 克隆项目
3. 运行 `flutter pub get` 安装依赖
4. 运行 `flutter run` 启动应用

## 贡献

欢迎提交 Issue 和 Pull Request

## 许可证

MIT License
