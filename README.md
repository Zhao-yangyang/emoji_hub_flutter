# EmojiHub

一个跨平台的表情包管理工具，帮助你更好地整理和使用表情包。通过悬浮工具条实现快速调用表情的功能。

## 功能特性

### 已完成功能 ✅

1. 基础框架
   - 跨平台支持 (iOS/Android/Windows/Linux)
   - SQLite 数据库存储
   - 深色主题
   - 错误处理机制

2. 分类管理
   - 分类列表显示
   - 分类切换功能
   - 分类图标显示
   - 新建分类
   - 编辑分类
   - 删除分类
   - 分类排序
   - 分类颜色自定义

3. 表情导入
   - 批量选择图片
   - 图片预览功能
   - 导入进度显示
   - 图片本地存储
   - 相对路径管理

4. 图片管理 
   - 表情预览功能
   - 表情编辑功能
   - 表情删除功能
   - 长按菜单功能
   - 批量操作功能
   - 跨分类移动
   - 表情分享功能

### 开发中功能 🚧

1. 图片管理
   - 拖拽排序功能
   - 表情搜索功能
   - 表情标签功能
   - 表情收藏功能
   - 使用历史记录

2. 跨平台快速访问 
   - [ ] Android 悬浮窗
     - [✅] 基础功能
       - [✅] 系统级悬浮窗显示/隐藏
       - [✅] 前台服务通知（保活机制）
       - [✅] 系统权限管理
     - [✅] 窗口管理
       - [✅] 窗口大小控制（默认/最小化/收缩）
       - [✅] 拖拽移动
       - [✅] 边缘吸附
     - [✅] 状态切换
       - [✅] 完整模式/最小化模式/收缩模式
       - [✅] 状态切换动画
     - [✅] UI设计
       - [✅] 现代化卡片式设计
       - [✅] 顶部工具栏
       - [✅] 最小化样式
     - [✅] 智能交互
       - [✅] 边缘感知
       - [✅] 位置记忆
     - [❌] 核心功能（开发中）
       - [❌] 表情预览功能
       - [❌] 表情选择和使用
       - [❌] 一键复制和分享
       - [❌] Flutter UI内容展示
   - [ ] iOS 键盘扩展
     - [ ] 创建键盘扩展
     - [ ] 实现表情键盘视图
     - [ ] App Groups 数据共享
     - [ ] 键盘布局优化

3. 用户体验
   - [ ] 空状态提示
   - [ ] 操作反馈
   - [ ] 动画效果

#### 实现说明
1. **Android 平台**
   - 悬浮窗实现方案
     - 使用原生 Service 管理悬浮窗生命周期
     - 集成 Flutter 引擎实现自定义 UI
     - 原生层处理窗口管理和交互
   - 核心功能
     - 系统级悬浮窗显示
     - 自由拖拽定位
     - 表情快速预览和使用
     - 一键复制和分享

2. **iOS 平台**
   - 实现自定义键盘扩展
   - 支持分类切换和表情选择
   - 直接输入到当前输入框

3. **共同功能**
   - 表情分类管理
   - 快速预览和选择
   - 数据同步机制

### 其他功能
   - 应用图标设计
   - 启动页面
   - 设置页面
   - 数据备份/恢复
   - 数据同步
   - 本地缓存优化

## 技术栈

- Flutter
- Riverpod (状态管理)
- SQLite (数据存储)
- Path Provider (文件管理)
- Image Picker (图片选择)

## 项目结构

```
lib/
├── core/           # 核心功能
│   ├── constants/  # 常量定义
│   ├── theme/      # 主题配置
│   └── utils/      # 工具类
├── data/           # 数据层
│   ├── models/     # 数据模型
│   ├── repositories/# 数据仓库
│   └── services/   # 服务类
├── providers/      # 状态管理
├── ui/             # 界面层
│   ├── screens/    # 页面
│   └── widgets/    # 组件
└── main.dart       # 入口文件
```

## 开发计划

### 第一阶段（已完成）✅
- [x] 基础框架搭建
- [x] 分类列表实现
- [x] 表情导入功能
- [x] 分类管理功能
  - [x] 新建分类
  - [x] 编辑分类
  - [x] 删除分类
  - [x] 分类排序
  - [x] 分类颜色自定义
- [x] 表情管理功能
  - [x] 表情预览
  - [x] 表情编辑
  - [x] 表情删除
  - [x] 批量操作
  - [x] 跨分类移动
  - [x] 表情分享

### 第二阶段（进行中）🚧
1. 性能优化
   - ✅ 图片缓存优化
   - ✅ 加载状态优化
   - ✅ 错误处理机制
   - ✅ 数据同步机制

2. 跨平台快速访问 
   - [ ] Android 悬浮窗
     - [✅] 系统权限管理
     - [🚧] 悬浮窗实现 (进行中)
       - [✅] 原生服务架构设计
       - [✅] 基础UI和交互功能
       - [ ] Flutter UI内容展示
       - [ ] 表情预览和使用功能
     - [✅] 拖拽定位功能
     - [❌] 表情快速预览
   - [ ] iOS 键盘扩展
     - [ ] 创建键盘扩展
     - [ ] 实现表情键盘视图
     - [ ] App Groups 数据共享
     - [ ] 键盘布局优化

3. 用户体验
   - [ ] 空状态提示
   - [ ] 操作反馈
   - [ ] 动画效果

## 安装和使用

1. 确保已安装 Flutter 开发环境
2. 克隆项目
3. 运行 `flutter pub get` 安装依赖
4. 运行 `flutter run` 启动应用

## 贡献

欢迎提交 Issue 和 Pull Request

## 许可证

MIT License
